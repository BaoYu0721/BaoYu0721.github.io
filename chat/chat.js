var AceCore=typeof exports=="undefined"?AceCore||{}:exports;void function(y){var l={};var g={};var c=false;var s=[];var e={format:function(B,A){return B.replace(/#\{(.*?)\}/g,function(D,C){return A&&(C in A)?A[C]:""})}};var u={};var w={};var z={log:function(A){}};function f(C,B){if(typeof B!="function"){return}if(C instanceof Array){var A=C.length;while(A--){f(C[A],B)}return}l[C]=l[C]||[];l[C].unshift(B)}function h(C,B){if(typeof B!="function"){return}if(C instanceof Array){var A=C.length;while(A--){h(C[A],B)}return}var D=l[C];if(!D){return}var A=D.length;while(A--){if(D[A]===B){D.splice(A,1)}}}function x(C,E){if(!c){s.push([C,E]);return}var D=l[C];if(!D){return}var B=D.length;while(B--){try{D[B](E,C)}catch(A){z.log([C,A.message].join(" : "))}}}function m(B){var A=w[B];return A&&A.instance}function r(A){return g[A]||{}}function k(B){var A=u[B];if(!A||A.instance||!A.creator){return}A.instance=A.creator({on:f,un:h,fire:x,getConfig:function(C){return function(D){return r(D||C)}}(B),getExtension:m,getLib:t,log:function(C){return function(D){z.log&&z.log([C,D].join(" : "))}}(B)});if(A.instance.init){A.instance.init()}}function q(B){var A=w[B];if(!A||A.instance||!A.creator){return}A.instance=A.creator({getConfig:function(C){return function(D){return r(D||C)}}(B),getExtension:m,getLib:t,log:function(C){return function(D){z.log&&z.log([C,D].join(" : "))}}(B)});if(A.instance.init){A.instance.init()}}function j(B){var A=u[B];if(!A||!A.instance){return}if(A.instance.destroy){A.instance.destroy()}A.instance=null}function v(B){var A=w[B];if(!A||!A.instance){return}if(A.instance.destroy){A.instance.destroy()}A.instance=null}function i(D,B){if(!B){return}var A=g[D]||{};for(var C in B){A[C]=B[C]}g[D]=A}function n(C,B){var A=u[C];if(A){return}u[C]={creator:B};c&&k(C)}function d(C,A){var B=w[C];if(B){return}w[C]={creator:A};c&&q(C)}function b(A){if(c){return}A=A||{};e=A.lib||e;z=A.logger||z;for(var C in w){q(C)}for(var C in u){k(C)}c=true;var B;while(B=s.shift()){x(B[0],B[1])}z.log&&z.log("core start.")}function o(){if(!c){return}for(var A in u){j(A)}for(var A in w){v(A)}c=false;z.log&&z.log("core stop.")}function t(){return e}y.addConfig=i;y.addModule=n;y.addExtension=d;y.start=b;y.stop=o}(AceCore);var AceTemplate=typeof exports!="undefined"?exports:AceTemplate||{};void function(e){var g={quot:'"',lt:"<",gt:">",amp:"&",nbsp:" "};var d={'"':"quot","<":"lt",">":"gt","&":"amp"," ":"nbsp"};var h={g:function(i){if(typeof i!="string"){return i}return document.getElementById(i)},decodeHTML:function(i){return String(i).replace(/&(quot|lt|gt|amp|nbsp);/ig,function(k,j){return g[j]}).replace(/&#u([a-f\d]{4});/ig,function(j,k){return String.fromCharCode(parseInt("0x"+k))}).replace(/&#(\d+);/ig,function(j,k){return String.fromCharCode(+k)})},encodeHTML:function(i){return String(i).replace(/["<>& ]/g,function(j){return"&"+d[j]+";"})},elementText:function(i){if(!i||!i.tagName){return""}if(/^(input|textarea)$/i.test(i.tagName)){return i.value}return h.decodeHTML(i.innerHTML)}};var b={};var f=false;function c(k){var j=[],l=[];j.push("with(this){");j.push(k.replace(/<(script|style)[^>]*>[\s\S]*?<\/\1>/g,function(m){return['!#{decodeURIComponent("',encodeURIComponent(m),'")}'].join("")}).replace(/[\r\n]+/g,"\n").replace(/^\n+|\s+$/mg,"").replace(/((^\s*[<>!#^&\u0000-\u0008\u007F-\uffff].*$|^.*[<>]\s*$|^(?!\s*(else|do|try|finally)\s*$)[^'":;{}()]+$|^(\s*(([\w-]+\s*=\s*"[^"]*")|([\w-]+\s*=\s*'[^']*')))+\s*$|^\s*([.#][\w-.]+(:\w+)?(\s*|,))*(?!(else|do|while|try|return)\b)[.#]?[\w-.*]+(:\w+)?\s*\{.*$)\s?)+/mg,function(m){m=['"',m.replace(/&none;/g,"").replace(/["'\\]/g,"\\$&").replace(/\n/g,"\\n").replace(/(!?#)\{(.*?)\}/g,function(r,n,q){q=q.replace(/\\n/g,"\n").replace(/\\([\\'"])/g,"$1");var o=/^[a-z$][\w+$]+$/i.test(q)&&!(/^(true|false|NaN|null|this)$/.test(q));return['",',o?["typeof ",q,'=="undefined"?"":'].join(""):"",(n=="#"?"_encode_":""),"(",q,'),"'].join("")}),'"'].join("").replace(/^"",|,""$/g,"");if(m){return["_output_.push(",m,");"].join("")}else{return""}}));j.push("}");var i=new Function("_output_","_encode_","helper",j.join(""));return i}e.format=function(n,m,l){if(!n){return""}var i,k;if(typeof n=="object"&&n.tagName){k=n;n=k.getAttribute("id")}l=l||this;i=b[n];if(!i){if(!/[^\w-]/.test(n)){if(!k){k=h.g(n)}i=this.register(n,k)}else{i=c(n)}}var j=[];i.call(m||"",j,h.encodeHTML,l);return j.join("")};e.register=function(n,m){if(!arguments.length&&!f){f=true;var j=document.getElementsByTagName("script");for(var l=0;l<j.length;l++){var k=j[l];if(/^(text\/template)$/i.test(k.getAttribute("type"))){var n=k.getAttribute("id");n&&arguments.callee.call(this,n,k)}}}if(!n){return}if(b[n]){return b[n]}if(typeof m!="string"){if(typeof m=="undefined"){m=h.g(n)}m=h.elementText(m)}return b[n]=c(m)};e.unregister=function(i){delete b[i]}}(AceTemplate);var AceEvent=AceEvent||{};void function(c){var g={g:function(h){if(typeof h!="string"){return h}return document.getElementById(h)},on:function(i,h,j){i=g.g(i);if(!i){return}if(i.addEventListener){i.addEventListener(h,j,false)}else{i.attachEvent&&i.attachEvent("on"+h,j)}},un:function(i,h,j){i=g.g(i);if(!i){return}if(i.removeEventListener){i.removeEventListener(h,j,false)}else{i.detachEvent&&i.detachEvent("on"+h,j)}},each:function(h,j){if(!h||!j){return}for(var k=0;k<h.length;k++){if(j(h[k],k)===false){return}}}};var f={};var b=["mousedown","click","dblclick"];var d=0;function e(i,h){if(!i||!h){return}while(i&&!/^html$/i.test(i.tagName)){if(h(i)==false){return}i=i.parentNode}}c.on=function(i,k,h){if(!k){return}i=g.g(i);if(!i){return}h=h||b;if(!(h instanceof Array)){h=[h]}if(!h.length){return}d++;var j=f[d]={target:i,events:{},callback:k};g.each(h,function(l){if(j.events[l]){return}j.events[l]=function(n){n=n||event;var m=n.srcElement||n.target;if(/^(html|document)$/i.test(m.tagName)){m=document.body}e(m,function(o){if(i.parentNode==o){return false}if(!o.getAttribute){return}var q=o.getAttribute("event-"+l);if(!q){switch(l){case"click":q=o.getAttribute("cmd");break;case"mousedown":q=o.getAttribute("down");break;case"contextmenu":q=o.getAttribute("menu");break}}if(!q){return}k(q,o,n);return false})};g.on(i,l,j.events[l])});return d};c.fire=function(j,l,h,k){var i=f[j];i&&i.callback(l,h,k)};c.un=function(j){var i=f[j];if(!i){return}for(var h in i.events){g.un(i.target,h,i.events[h])}delete f[j]}}(AceEvent);var AceTree=AceTree||{};void function(g){var l={g:function(r){if(typeof r!="string"){return r}return document.getElementById(r)},remove:function(r){r=this.g(r);if(!r){return}r.parentNode.removeChild(r)},addClass:function(r,s){j(r,"class",s)},removeClass:function(r,s){k(r,"class",s)},each:function(t,s){if(!t||!s){return}for(var r=0;r<t.length;r++){if(s(t[r],r)===false){break}}},getKeys:function(t){var r=[];for(var s in t){r.push(s)}return r}};function b(s,t){s=l.g(s);t=l.g(t);if(s==t){return true}var r;e(t,function(u){if(s==u){r=false;return false}});return r}function c(s,r){s=l.g(s);if(!s){return}s.removeAttribute("id");s.parentNode.insertBefore(f(r),s);s.parentNode.removeChild(s)}function h(s,r){s=l.g(s);if(!s){return}s.appendChild(f(r))}function j(t,s,v){t=l.g(t);if(!t||!t.getAttribute||!t.setAttribute){return}var u=t.getAttribute(s);if(u){var r=u.indexOf(v);while(r>=0){if(/^\s*$/.test(u.charAt(r-1)+u.charAt(r+v.length))){return}r=u.indexOf(v,r+1)}u+=" "+v}else{u=v}t.setAttribute(s,u)}function k(t,s,v){t=l.g(t);if(!t||!t.getAttribute||!t.setAttribute){return}var u=t.getAttribute(s);if(!u){return}var r=u.indexOf(v);while(r>=0){if(/^\s*$/.test(u.charAt(r-1)+u.charAt(r+v.length))){t.setAttribute(s,u.substring(0,r)+u.substring(r+v.length));return}r=u.indexOf(v,r+1)}}function e(s,r){s=l.g(s);if(!s||!r){return}while(s&&!/^html$/i.test(s.tagName)){if(r(s)==false){return}s=s.parentNode}}var q={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};q.optgroup=q.option;q.tbody=q.tfoot=q.colgroup=q.caption=q.thead;q.th=q.td;function f(u){var s=document.createDocumentFragment();if(!u){return s}u=u.replace(/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,"<$1></$2>");var r=(u.match(/<([\w:]+)/)||["",""])[1].toLowerCase(),v=q[r]||q._default,t=v[0],w=document.createElement("div");w.innerHTML=[v[1],u,v[2]].join("");while(t--){w=w.lastChild}while(w.childNodes.length){s.appendChild(w.childNodes[0])}return s}var o={};var n=0;function m(r,s){this.parentNode=r;this.tree=r.tree;this.layer=r.layer+1;this.id=s[this.tree.fieldIdentifier];this.did=[this.tree.didPrefix,this.tree.handler,this.id].join("-");this.cid=[this.tree.didPrefix,this.tree.handler,this.id,"childs"].join("-");o[this.did]=this;this.data=s;this.status={};this.childNodes=[];if(this.tree.oncreated){this.tree.oncreated(this)}}m.prototype.remove=function(s){if(this.tree.focusDid==this.did){this.tree.focusDid=""}this.removeAll(true);delete o[this.did];if(s){return}this.parentNode.childNodes=[].concat(this.parentNode.childNodes.slice(0,this.index),this.parentNode.childNodes.slice(this.index+1));for(var r=this.index;r<this.parentNode.childNodes.length;r++){this.parentNode.childNodes[r].index=r}if(this.tree.onsort){this.parentNode.refresh()}else{!b(this.did,this.cid)&&l.remove(this.cid);l.remove(this.did)}};m.prototype.appendChild=function(s,t){if(!s){return}if(typeof t=="undefined"){t=true}var r=new m(this,s);r.index=this.childNodes.length;this.childNodes.push(r);if(t){r.loadChilds(s[this.tree.fieldChilds],true)}if(this.tree.onsort){this.childNodes.sort(this.tree.onsort);c(this.did,this.reader())}else{h(this.cid,r.reader())}return r};m.prototype.appendChilds=function(r,v){if(!r){return}if(typeof v=="undefined"){v=true}var t=this;var s=[];l.each(r,function(x){var w=new m(t,x);s.push(w);w.index=t.childNodes.length;t.childNodes.push(w);if(v){w.loadChilds(x[t.tree.fieldChilds],true)}});if(this.tree.onsort){this.tree.onsort&&this.childNodes.sort(this.tree.onsort);this.refresh()}else{var u=[];l.each(s,function(w){u.push(w.reader())});h(this.cid,u.join(""))}return s};m.prototype.sort=function(t,s){if(!this.tree.onsort){return}this.childNodes.sort(this.tree.onsort);var r;l.each(this.childNodes,function(v,u){if(v.index!=u){v.index=u;r=true}if(t&&v.sort(true,true)){r=true}});if(r&&!s){this.refresh()}return r};m.prototype.updateData=function(r,u){if(!r){return}var t=false;for(var s in r){if(this.data[s]!==r[s]){this.data[s]=r[s];t=true}}if(u){this.loadChilds(r[this.tree.fieldChilds],true)}if(t){this.refresh()}};m.prototype.reader=function(){if(!this.tree.onreader){return""}var s=[];l.each(this.childNodes,function(t){s.push(t.reader())});if(this==this.tree){return s.join("")}var r=this;return this.tree.onreader(this).replace(/(^\s*<\w+)([^>]*>)([\s\S]*$)/,function(u,t,w,v){v=v.replace(/(<\w+\b[^>]*)(\bdata-type="childs"[^>]*>)(\s*<\/\w+>)/,function(y,x,A,z){if(!s.length){return""}return[x,' id="',r.cid,'"',A,s.join(""),z].join("")});return[t,' id="',r.did,'"',w,v].join("")})};m.prototype.removeAll=function(r){l.each(this.childNodes,function(s){s.remove(true)});this.childNodes=[];if(r){return}this.refresh()};m.prototype.loadChilds=function(r,t){if(this.childNodes.length==0&&r&&r.length==0){return}this.removeAll(true);if(!r){return}var s=this;l.each(r,function(v){var u=new m(s,v);s.childNodes.push(u);u.loadChilds(v[s.tree.fieldChilds],true)});this.tree.onsort&&this.childNodes.sort(this.tree.onsort);l.each(this.childNodes,function(v,u){v.index=u});!t&&this.refresh()};m.prototype.each=function(s){var r;s&&l.each(this.childNodes,function(t){result=s(t)||t.each(s);if(r===false){return r}});return r};m.prototype.setStatus=function(r,s,t){if(!r){return}if(this.status[r]==s){return}this.status[r]=s;if(t){return}if(this.tree.statusClasses instanceof RegExp){if(this.tree.statusClasses.test(r)){if(s){l.addClass(this.did,r);this.tree.childsClasses.test(r)&&l.addClass(this.cid,r)}else{l.removeClass(this.did,r);this.tree.childsClasses.test(r)&&l.removeClass(this.cid,r)}return}}if(typeof this.tree.statusClasses=="object"){var u=this.tree.statusClasses[r];if(u){if(u instanceof Array){if(s){l.addClass(this.did,u[0]);l.removeClass(this.did,u[1])}else{l.addClass(this.did,u[1]);l.removeClass(this.did,u[0])}}else{if(s){l.addClass(this.did,u)}else{l.removeClass(this.did,u)}}return}}this.refresh()};m.prototype.getStatus=function(r){return this.status[r]};m.prototype.getClasses=function(s){var r=[];for(var t in this.status){if(!this.tree.statusClasses.test(t)){continue}if(this.status[t]&&(!s||this.tree.childsClasses.test(t))){r.push(t)}}return r.join(" ")};m.prototype.refresh=function(){if(this==this.tree){this.parent.innerHTML=m.prototype.reader.call(this);return}!b(this.did,this.cid)&&l.remove(this.cid);c(this.did,this.reader())};m.prototype.expand=function(){this.setStatus("expand",true)};m.prototype.collapse=function(){this.setStatus("expand",false)};m.prototype.toggle=function(){this.setStatus("expand",!this.getStatus("expand"))};m.prototype.nextNode=function(){if(this.childNodes.length&&this.getStatus("expand")){return this.childNodes[0]}return this.parentNode.childNodes[this.index+1]};m.prototype.previousNode=function(){if(!this.index){if(this.parentNode==this.tree){return}return this.parentNode}return this.parentNode.childNodes[this.index-1]};m.prototype.focus=function(r){this.tree.setFocused(this,r)};var d={didPrefix:"node",fieldIdentifier:"id",fieldChilds:"nodes",statusClasses:/^(focus|hover|select|expand)$/,childsClasses:/^(expand)$/};function i(r){r=r||{};for(var s in d){!(s in r)&&(r[s]=d[s])}for(var s in r){this[s]=r[s]}this.tree=this;this.layer=0;this.index=0;this.handler=n++;this.childNodes=[];this.focusDid="";this.cid=this.parent;j(this.parent,"data-handler",this.handler);if(this.oninit){this.oninit(this)}}i.prototype.loadChilds=function(r,s){if(this.childNodes.length==0&&r&&r.length==0){return}s&&this.saveStatus();m.prototype.loadChilds.call(this,r,true);s&&this.restoreStatus();this.refresh()};i.prototype.appendChild=function(r,s){return m.prototype.appendChild.call(this,r,s)};i.prototype.appendChilds=function(r,s){return m.prototype.appendChilds.call(this,r,s)};i.prototype.updateData=function(s,t){if(!s){return}var r=this.node4data(s);r&&r.updateData(s,t);return r};i.prototype.sort=function(r){m.prototype.sort.call(this,true,r||typeof r=="undefiend")};i.prototype.refresh=function(){m.prototype.refresh.call(this)};i.prototype.removeAll=function(){if(!this.childNodes.length){return}m.prototype.removeAll.call(this);this.refresh()};i.prototype.removeNode=function(s){if(!s){return}var r=this.node4data(s);r&&r.remove()};i.prototype.setFocused=function(t,r){if(!t){return}var s=this.node4data(t);if(!s||s.did==this.focusDid){return}var u=o[this.focusDid];u&&u.setStatus("focus",false);s&&s.setStatus("focus",true);if(r){var v=l.g(s.did);v&&v.scrollIntoView(r==1)}this.focusDid=s.did;if(this.onfocus){this.onfocus(s)}};i.prototype.getFocused=function(){return o[this.focusDid]};i.prototype.node4data=function(s){if(!s){return}if(s instanceof m&&s.tree==this){return s}var t=typeof s=="string"?s:s[this.fieldIdentifier];var r=[this.didPrefix,this.handler,t].join("-");if(o[r]){return o[r]}};i.prototype.node4target=function(s){var r=AceTree.node4target(s);if(!r||r.tree!=this){return}return r};i.prototype.each=function(r){return m.prototype.each.call(this,r)};i.prototype.saveStatus=function(){var r={};this.status=r;this.each(function(s){r[s.did]=s.status})};i.prototype.restoreStatus=function(){if(!this.status){return}var r=this.status;this.each(function(s){if(s.did in r){s.status=r[s.did]}});this.status=null};g.create=function(r){return new i(r)};g.node4target=function(s){var r;s=l.g(s);e(s,function(t){var u=o[t.id];if(u){r=u;return false}});return r}}(AceTree);var AceUbb=AceUbb||{};void function(d){var c={};function e(g,h){c[g]=h}function f(g){return String(g).replace(/<br\s*\/>/g,"\n").replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;/g," ")}function b(i){i=String(i).replace(/[&"<> \t\n\r]/g,function(j){return({"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;"," ":"&nbsp;","\n":"<br/>","\r":"","\t":new Array(5).join("&nbsp;")})[j]}).replace(/(\[code\])(.*?)(\[\/code\])/ig,function(k,j,l){if(typeof AceHighlight=="undefined"){return"<pre><code>"+l+"</code></pre>"}return"<pre><code>"+AceHighlight.exportHtml(f(l)).replace(/\[/g,"&#91;").replace(/\[/g,"&#93;")+"</code></pre>"});for(var h in c){if(c[h]){i=c[h](i)}}while((/\[(i|u|s|sub|sup|small|big|left|center|right|img|url)\]\[\/\1\]/i).test(i)){i=i.replace(/\[(i|u|s|sub|sup|small|big|left|center|right|img|url)\]\[\/\1\]/ig,"")}i=i.replace(/\[size=(\d{1,2}(\.\d+)?(px|pt|in|cm|mm|pc|em|ex|%)+?)\](.*?)\[\/size\]/ig,'<font style="font-size:$1">$4</font>').replace(/\[b\](.*?)\[\/b\]/ig,"<strong>$1</strong>");while((/\[(i|u|s|sub|sup|small|big)\](.*?)\[\/\1\]/i).test(i)){i=i.replace(/\[(i|u|s|sub|sup|small|big)\](.*?)\[\/\1\]/ig,"<$1>$2</$1>")}i=i.replace(/\[(left|center|right)\](.+)\[\/\1]/ig,'<p align="$1">$2</p>');i=i.replace(/\[color=\s*(#[a-f0-9]{6}|red|orange|yellow|green|blue|indigo|violet|beige|black|brown|gray|navy|silver|tan)\s*\](.*?)\[\/color\]/ig,'<font style="color:$1">$2</font>').replace(/\[img=\s*((https?:\/)?\/.*?)\](.*?)\s*\[\/img\]/ig,'<img src="$1" title="$3" alt="$3"/>').replace(/\[img\]\s*((https?:\/)?\/.*?)\[\/img\]/ig,'<img src="$1" alt="img"/>').replace(/\[url=\s*((https?:\/)?\/.*?)\](.*?)\s*\[\/url\]/ig,'<a href="$1" target="_blank">$3</a>').replace(/\[url\]\s*((https?:\/)?\/.*?)\[\/url\]/ig,'<a href="$1" alt="url" target="_blank">$1</a>').replace(/\[(br|hr)\]/ig,"<$1/>").replace(/\[h([1-6])\](.+)\[\/h\1\]/ig,"<h$1>$2</h$1>");do{var g=i.length;i=i.replace(/\[quote=(.*?)\](.*?)\[\/quote\]/ig,"<fieldset><legend>$1</legend>$2</fieldset>")}while(i.length!=g);return i}d.exportHtml=b;d.addPlugin=e}(AceUbb);var AceHighlight=AceHighlight||{};void function(d){var e=".Code{font-family:Courier New;font-size:14px;background-color:#EEEEEE;}\n.Code .Whitespace{}\n.Code .Regex{color:Lime;}\n.Code .LineComment, .MultiComment{font-weight:bold;font-style:italic;color:Gray;}\n.Code .CompilerDirective{color:Green;}\n.Code .Symbol{color:Blue;}\n.Code .Number, .Float{color:Red;font-weight:bold;}\n.Code .String, .Character{color:Maroon;}\n.Code .Identifier{}\n.Code .Reserved{font-weight:bold;}\n.Code .Type{color:#2B91AF;}\n.Code .Variant{color:Red;}\n.Code .Function{color:Fuchsia;}\n.Code .Unknown{font-style:italic;background-color:Black;color:White;}\n";var g={attribute:{syntaxs:[{pattren:/^\s+/,name:"Whitespace"},{pattren:/^(=|:|;|\/)/,name:"Symbol"},{pattren:/^('[^']*'|"[^"]*")/,name:"String"},{pattren:/^[\w\/\-_]+/,name:"Variant"}]},property:{syntaxs:[{pattren:/^\s+/,name:"Whitespace"},{pattren:/^\/\*[\s\S]*?\*\//,name:"MultiComment"},{pattren:/^([a-zA-Z0-9_\-]+)(\s*)(:)(\s*)([^;]*)(;|$)/,methods:["Variant","Whitespace","Symbol","Whitespace","String","Symbol"]}]},css:{syntaxs:[{pattren:/^\s+/,name:"Whitespace"},{pattren:/^\/\*[\s\S]*?\*\//,name:"MultiComment"},{pattren:/^(((\.|#)[a-zA-Z0-9_\-]+[\s,]*)+)(\{)([\s\S]*?)(\})/,methods:["Function",null,null,"Symbol","property","Symbol"]}]},javascript:{syntaxs:[{pattren:/^\s+/,name:"Whitespace"},{pattren:/^\/\/.*/,name:"LineComment"},{pattren:/^\/\*[\s\S]*?\*\//,name:"MultiComment"},{pattren:/^\/([^\\\/\n\r]|\\.)+\/([img]{0,3})/,name:"Regex",start:["","Symbol"]},{pattren:/^(~|\+|\-|\*|\(|\)|\[|\]|\{|\}|\||\;|:|=|<|>|\.|\,|\%|\!|&|\?|\^)+/,name:"Symbol"},{pattren:/^\//,name:"Symbol"},{pattren:/^(\d+(?!\.|x|e|d|m)u?)|^0x([\da-fA-F]+(?!\.|x|m)u?)|^NaN/,name:"Number"},{pattren:/^(\d+)?\.\d+((\+|\-)?e\d+)?(m|d|f)?|^\d+((\+|\-)?e(\+|\-)?\d+)?(m|d|f)?/,name:"Float"},{pattren:/^"([^\\"]|(\\[\s\S]))*"/,name:"String"},{pattren:/^'([^\\']|(\\[\s\S]))*'/,name:"String"},{pattren:/^[\w$_]+/,name:"Identifier"}],identifiers:[{pattren:/^(break|delete|function|return|typeof|case|do|if|switch|var|catch|else|in|this|void|continue|false|instanceof|throw|while|debugger)$/,name:"Reserved"},{pattren:/^(finally|new|true|with|default|for|null|try|abstract|double|goto|native|static|boolean|enum|implements|package|super|byte|prototype)$/,name:"Reserved"},{pattren:/^(export|import|private|synchronized|char|extends|int|protected|throws|class|final|interface|public|transient|const|float|long|short|volatile)$/,name:"Reserved"},{pattren:/^(Array|String|Boolean|undefined|Object|Enumerator|Error|Math)$/,name:"Type"}]},vb:{syntaxs:[{pattren:/^\s+/,name:"Whitespace"},{pattren:/^(~|\+|\-|\*|\(|\)|\[|\]|\{|\}|\||\;|:|=|<|>|\.|\,|\%|\!|&|\?|\^)+/,name:"Symbol"},{pattren:/^(\d+(?!\.|x|e|d|m)u?)|^0x([\da-fA-F]+(?!\.|x|m)u?)|^NaN/,name:"Number"},{pattren:/^(\d+)?\.\d+((\+|\-)?e\d+)?(m|d|f)?|^\d+((\+|\-)?e(\+|\-)?\d+)?(m|d|f)?/,name:"Float"},{pattren:/^"[^"]*"/,name:"String"},{pattren:/^('.*|REM\b.*')/,name:"LineComment"},{pattren:/^#.*/,name:"CompilerDirective"},{pattren:/^[\w$_]+/,name:"Identifier"}],identifiers:[{pattren:/^(AddHandler|AddressOf|Alias|And|AndAlso|As|Boolean|ByRef|Byte|ByVal|Call|Case|Catch|CBool|CByte|CChar|CDate|CDec|CDbl|Char|CInt|Class|CLng|CObj|Const|Continue)$/i,name:"Reserved"},{pattren:/^(CSByte|CShort|CSng|CStr|CType|CUInt|CULng|CUShort|Date|Decimal|Declare|Default|Delegate|Dim|DirectCast|Do|Double|Each|Else|ElseIf|End|EndIf|Enum|Erase|Error)$/i,name:"Reserved"},{pattren:/^(Event|Exit|False|Finally|For|Friend|Function|Get|GetType|GetXMLNamespace|Global|GoSub|GoTo|Handles|If|Implements|Imports|Imports|In|Inherits|Integer|Interface)$/i,name:"Reserved"},{pattren:/^(Is|IsNot|Let|Lib|Like|Long|Loop|Me|Mod|Module|MustInherit|MustOverride|MyBase|MyClass|Namespace|Narrowing|New|Next|Not|Nothing|NotInheritable|NotOverridable)$/i,name:"Reserved"},{pattren:/^(Object|Of|On|Operator|Option|Optional|Or|OrElse|Overloads|Overridable|Overrides|ParamArray|Partial|Private|Property|Protected|Public|RaiseEvent|ReadOnly|ReDim)$/i,name:"Reserved"},{pattren:/^(RemoveHandler|Resume|Return|SByte|Select|Set|Shadows|Shared|Short|Single|Static|Step|Stop|String|Structure|Sub|SyncLock|Then|Throw|To|True|Try|TryCast)$/i,name:"Reserved"},{pattren:/^(TypeOf|Variant|Wend|UInteger|ULong|UShort|Using|When|While|Widening|With|WithEvents|WriteOnly|Xor)$/i,name:"Reserved"}]},xhtml:{syntaxs:[{pattren:/^\s+/,name:"Whitespace"},{pattren:/^<!--[\s\S]*?-->/,name:"MultiComment"},{pattren:/^(<!)([\s\S]*?)(>)/,methods:["Symbol","attribute","Symbol"]},{pattren:/^(<\?)(xml\b)([\s\S]*?)(\?>)/,methods:["Symbol","Reserved","attribute","Symbol"]},{pattren:/^(<\?)(php\b)(.*?)(\?>)/,methods:["Symbol","Reserved","php","Symbol"]},{pattren:/^(<\?)(php\b)([\s\S]*?)(\n\?>|$)/,methods:["Symbol","Reserved","php","Symbol"]},{pattren:/^(<%@)([\s\S]*?)(%>)/,methods:["Symbol","attribute","Symbol"]},{pattren:/^(<%)([\s\S]*?)(%>)/,methods:["Symbol","Text","Symbol"]},{pattren:/^(<)(style\b)(([^>"']*(".*?"|'.*?')*)*?)(>)([\s\S]*?)(<\/)(style)(>)/i,methods:["Symbol","Type","attribute",null,null,"Symbol","css","Symbol","Type","Symbol"]},{pattren:/^(<)(script\b)([^>]*("|')(text\/)?vbscript("|'))(([^>"']*(".*?"|'.*?')*)*?)(>)([\s\S]*?)(<\/)(script)(>)/i,methods:["Symbol","Type","attribute",null,null,null,null,null,null,"Symbol","vb","Symbol","Type","Symbol"]},{pattren:/^(<)(script\b)([^>]*("|')(text\/)?csharp("|'))(([^>"']*(".*?"|'.*?')*)*?)(>)([\s\S]*?)(<\/)(script)(>)/i,methods:["Symbol","Type","attribute",null,null,null,null,null,null,"Symbol","csharp","Symbol","Type","Symbol"]},{pattren:/^(<)(script\b)(([^>"']*(".*?"|'.*?')*)*?)(>)([\s\S]*?)(<\/)(script)(>)/i,methods:["Symbol","Type","attribute",null,null,"Symbol","javascript","Symbol","Type","Symbol"]},{pattren:/^(<\/?)([\w\-]+)(([^>"']*(".*?"|'.*?')*)*?)(>)/i,methods:["Symbol","Type","attribute",null,null,"Symbol"]},{pattren:/^[^<]+/i,name:"Text"}]},php:{syntaxs:[{pattren:/^\s+/,name:"Whitespace"},{pattren:/^(\/\/|#).*/,name:"LineComment"},{pattren:/^\/\*[\s\S]*?\*\//,name:"MultiComment"},{pattren:/^(~|\+|\-|\*|\(|\)|\[|\]|\{|\}|\||\;|:|=|<|>|\.|\,|\%|\!|&|\?|\^|@)+/,name:"Symbol"},{pattren:/^\//,name:"Symbol"},{pattren:/^(\d+(?!\.|x|e|d|m)u?)|^0x([\da-fA-F]+(?!\.|x|m)u?)|^NaN/,name:"Number"},{pattren:/^(\d+)?\.\d+((\+|\-)?e\d+)?(m|d|f)?|^\d+((\+|\-)?e(\+|\-)?\d+)?(m|d|f)?/,name:"Float"},{pattren:/^"([^\\"]|\\.)*"/,name:"String"},{pattren:/^'([^\\']|\\.)*'/,name:"String"},{pattren:/^\$[\w_]*/,name:"Variant"},{pattren:/^[\w_]+/,name:"Identifier"}],identifiers:[{pattren:/^(require_once|include|and|or|xor|__FILE__|exception|php_user_filter|__LINE__|array|as|break|case|cfunction|class|const|continue|declare|default|die|do|each|echo|else|elseif|empty)$/,name:"Reserved"},{pattren:/^(enddeclare|endfor|endforeach|endif|endswitch|endwhile|eval|exit|extends|for|foreach|function|global|if|isset|list|new|old_function|print|return|static|switch|unset|use|var|while|__FUNCTION__|__CLASS__|__METHOD__)$/,name:"Reserved"},{pattren:/^(NULL|FALSE|TRUE)$/,name:"Variant"}]},csharp:{syntaxs:[{pattren:/^\s+/,name:"Whitespace"},{pattren:/^\/\/.*/,name:"LineComment"},{pattren:/^\/\*[\s\S]*?\*\//,name:"MultiComment"},{pattren:/^#.*/,name:"CompilerDirective"},{pattren:/^(~|\+|\-|\*|\(|\)|\[|\]|\{|\}|\||\;|:|=|<|>|\.|\,|\%|\!|&|\?|\/)+/,name:"Symbol"},{pattren:/^(\d+(?!\.|x|e|d|m)u?)|^0x([\da-fA-F]+(?!\.|x|m)u?)/,name:"Number"},{pattren:/^(\d+)?\.\d+((\+|\-)?e\d+)?(m|d|f)?|^\d+((\+|\-)?e(\+|\-)?\d+)?(m|d|f)?/,name:"Float"},{pattren:/^@"(""|[^"])*"|^"([^\\"]|\\.)*"/,name:"String"},{pattren:/^\'([^\']|\\.)+\'/,name:"Character"},{pattren:/^[\w_]+|^@[\w_]+/,name:"Identifier"}],identifiers:[{pattren:/^(abstract|as|base|bool|break|byte|case|catch|char|checked|class|const|continue|decimal|default|delegate|do|double|else|enum)$/,name:"Reserved"},{pattren:/^(event|explicit|extern|false|finally|fixed|float|for|foreach|goto|if|implicit|in|int|interface|internal|is|lock|long|namespace)$/,name:"Reserved"},{pattren:/^(new|null|object|operator|out|override|params|private|protected|public|readonly|ref|return|sbyte|sealed|short|sizeof|stackalloc)$/,name:"Reserved"},{pattren:/^(static|string|struct|switch|this|throw|true|try|typeof|uint|ulong|unchecked|unsafe|ushort|using|virtual|void|volatile|while)$/,name:"Reserved"},{pattren:/^(select|from|where|order|by|group|orderby|into)$/,name:"Reserved"},{pattren:/^[A-Z][\w_]*$/,name:"Type"}]},delphi:{syntaxs:[{pattren:/^\s+/,name:"Whitespace"},{pattren:/^\/\/.*/,name:"LineComment"},{pattren:/^\{\$[\s\S]*?\}|^\(\*$[\s\S]*?\*\)/,name:"CompilerDirective"},{pattren:/\(\*[\s\S]*?\*\)|^\{[\s\S]*?\}/,name:"MultiComment"},{pattren:/^\d+|^\$[\da-f]+/i,name:"Number"},{pattren:/^(\d+)?\.\d+((\+|\-)?e\d+)?|^\d+((\+|\-)?e(\+|\-)?\d+)?/,name:"Float"},{pattren:/^(\+|\-|\*|\/|\(|\)|\[|\]|\{|\}|\||\;|:|=|<|>|\.|\,|\%|\^|@)+/,name:"Symbol"},{pattren:/^'(''|[^'])*'/,name:"String"},{pattren:/^#\d+|^#$[\da-f]+/i,name:"Character"},{pattren:/^[\w_]+/,name:"Identifier"}],identifiers:[{pattren:/^(and|else|inherited|packed|then|array|end|initialization|procedure|threadvar|as|except|inline|program)$/i,name:"Reserved"},{pattren:/^(to|asm|exports|interface|property|try|begin|file|is|raise|type|case|final|label|record|unit)$/i,name:"Reserved"},{pattren:/^(class|finalization|library|repeat|unsafe|const|finally|mod|resourcestring|until|constructor|for|nil)$/i,name:"Reserved"},{pattren:/^(sealed|uses|destructor|function|not|set|var|dispinterface|goto|object|shl|while|div|if|of|shr|with|do)$/i,name:"Reserved"},{pattren:/^(implementation|or|static|xor|downto|in|out|string)$/i,name:"Reserved"},{pattren:/^(absolute|dynamic|local|platform|requires|abstract|export|message|private|resident)$/i,name:"Reserved"},{pattren:/^(assembler|external|name|protected|safecall|automated|far|near|public|stdcall|cdecl)$/i,name:"Reserved"},{pattren:/^(forward|nodefault|published|stored|contains|implements|overload|read|varargs|default)$/i,name:"Reserved"},{pattren:/^(index|override|readonly|virtual|deprecated|inline|package|register|write|dispid|library|pascal|reintroduce|writeonly)$/i,name:"Reserved"},{pattren:/^(True|False)$/i,name:"Variant"},{pattren:/^(Exit|Break|Continue|Str|Val)$/i,name:"Function"},{pattren:/^(((I|T|C|P)[A-Z]\w+)|Integer|Cardinal|Shortint|Smallint|Longint|Int64|Longword|Boolean|String|Char|Byte|Double|Word|Real48|Single|Extended|Comp|Currency)$/,name:"Type"}]},mssql:{syntaxs:[{pattren:/^\s+/,name:"Whitespace"},{pattren:/^-{2,}.*/,name:"LineComment"},{pattren:/^\/\*[\s\S]*?\*\//,name:"MultiComment"},{pattren:/^(\+|\-|\*|\/|\(|\)|\{|\}|\||\;|:|=|<|>|\.|\,|\%|\!)+/,name:"Symbol"},{pattren:/^(^\d+)|(^\$[\da-f]+)/,name:"Number"},{pattren:/^(\d+)?\.\d+((\+|\-)?e\d+)?|^\d+((\+|\-)?e(\+|\-)?\d+)?/,name:"Float"},{pattren:/^(N)?'([^']|'')*'/,name:"String"},{pattren:/^@@?\w+/,name:"Variant"},{pattren:/^([\w_]+|\[[\s\S]*?\])/,name:"Identifier"}],identifiers:[{pattren:/^(ENCRYPTION|ORDER|ADD|END|OUTER|ALL|ERRLVL|OVER|ALTER|ESCAPE|PERCENT|AND|EXCEPT|PLAN|ANY|EXEC|PRECISION|AS|EXECUTE|PRIMARY|ASC|EXISTS|PRINT|AUTHORIZATION|EXIT|PROC|AVG|EXPRESSION)$/i,name:"Reserved"},{pattren:/^(PROCEDURE|BACKUP|FETCH|PUBLIC|BEGIN|FILE|RAISERROR|BETWEEN|FILLFACTOR|READ|BREAK|FOR|READTEXT|BROWSE|FOREIGN|RECONFIGURE|BULK|FREETEXT|REFERENCES|BY|FREETEXTTABLE|REPLICATION|CASCADE|FROM|RESTORE|CASE|FULL|RESTRICT)$/i,name:"Reserved"},{pattren:/^(CHECK|FUNCTION|RETURN|CHECKPOINT|GOTO|REVOKE|CLOSE|GRANT|RIGHT|CLUSTERED|GROUP|ROLLBACK|COALESCE|HAVING|ROWCOUNT|COLLATE|HOLDLOCK|ROWGUIDCOL|COLUMN|IDENTITY|RULE|COMMIT|IDENTITY_INSERT|SAVE)$/i,name:"Reserved"},{pattren:/^(COMPUTE|IDENTITYCOL|SCHEMA|CONSTRAINT|IF|SELECT|CONTAINS|IN|SESSION_USER|CONTAINSTABLE|INDEX|SET|CONTINUE|INNER|SETUSER|CONVERT|INSERT|SHUTDOWN|COUNT|INTERSECT|SOME|CREATE|INTO|STATISTICS)$/i,name:"Reserved"},{pattren:/^(CROSS|IS|SUM|CURRENT|JOIN|SYSTEM_USER|CURRENT_DATE|KEY|TABLE|CURRENT_TIME|KILL|TEXTSIZE|CURRENT_TIMESTAMP|LEFT|THEN|CURRENT_USER|LIKE|TO|CURSOR|LINENO|TOP|DATABASE|LOAD|TRAN|DATABASEPASSWORD)$/i,name:"Reserved"},{pattren:/^(MAX|TRANSACTION|DATEADD|MIN|TRIGGER|DATEDIFF|NATIONAL|TRUNCATE|DATENAME|NOCHECK|TSEQUAL|DATEPART|NONCLUSTERED|UNION|DBCC|NOT|UNIQUE|DEALLOCATE|NULL|UPDATE|DECLARE|NULLIF|UPDATETEXT|DEFAULT)$/i,name:"Reserved"},{pattren:/^(OF|USE|DELETE|OFF|USER|DENY|OFFSETS|VALUES|DESC|ON|VARYING|DISK|OPEN|VIEW|DISTINCT|OPENDATASOURCE|WAITFOR|DISTRIBUTED|OPENQUERY|WHEN|DOUBLE|OPENROWSET|WHERE|DROP|OPENXML|WHILE|DUMP|OPTION|WITH|ELSE|OR|WRITETEXT|OUTPUT|INPUT|OUT|PUT)$/i,name:"Reserved"},{pattren:/^(AVG|COUNT||MAX|MIN||DATEADD|DATEDIFF||DATENAME|DATEPART|GETDATE|ABS|ACOS|ASIN|ATAN|ATN2|CEILING|COS|COT|DEGREES||EXP|FLOOR|LOG|LOG10|PI)$/i,name:"Function"},{pattren:/^(POWER|RADIANS|RAND||ROUND|SIGN|SIN|SQRT|TAN|NCHAR|CHARINDEX|LEN|LOWERLTRIM|PATINDEX|REPLACEREPLICATERTRIMSPACE|STR|STUFF|SUBSTRING|UNICODE|UPPER|CASE|COALESCE|CONVERT|DATALENGTH|NEWID)$/i,name:"Function"},{pattren:/^(bigint|int|smallint|tinyint|bit|decimal|numeric|money|smallmoney|float|real|datetime|smalldatetime|char|varchar|text|nchar|nvarchar|ntext|binary|varbinary|image|cursor|sql_variant|table|timestamp|uniqueidentifier)$/i,name:"Type"}]}};function h(i){if(/^\s*<[\s\S]*>\s*/.test(i)){return g.xhtml}if(/^\s*(unit|program|library)\s+\w+(\.\w+)*\s*;/.test(i)){return g.delphi}if(/^\s*(uses)\s+\w+(\.\w+)*\s*(,|;)/.test(i)){return g.delphi}if(/^\s*(select|insert|update|create|delete)\s*/.test(i)){return g.mssql}if(/^\s*(using|namespace)\s*\w+(\.\w+)*\s*;/.test(i)){return g.csharp}if(/^\s*\[\s*\w+([^\]]*)\s*\]/.test(i)){return g.csharp}if(/^dim\s*\w+as\s*\w+/i.test(i)){return g.vb}if(/^('|REM\b)/i.test(i)){return g.vb}if(/^(public|private|protected|friend)(\s*\w+)*_\s*(\r|\n)/i.test(i)){return g.vb}return g.javascript}function f(m,n){if(!n){return null}var z=[];var u=true;var x="";while(u&&m){u=false;var r;for(var s=0;s<n.syntaxs.length;s++){if(n.syntaxs[s].start){var w=false;for(r=0;r<n.syntaxs[s].start.length;r++){if(x==n.syntaxs[s].start[r]){w=true;break}}if(!w){continue}}var t=n.syntaxs[s].pattren.exec(m);if(t){var o=n.syntaxs[s].methods;if(o){for(r=0;r<o.length;r++){var l=o[r];if(!l){continue}if(!t[r+1]){continue}if(g[l]&&g[l].syntaxs){var v=f(t[r+1],g[l]);for(var q=0;q<v.length;q++){z.push(v[q])}}else{z.push({name:l,text:t[r+1]})}}}else{if(n.syntaxs[s].name){var y={name:n.syntaxs[s].name,text:t[0]};if(y.name=="Identifier"&&n.identifiers){for(r=0;r<n.identifiers.length;r++){if(n.identifiers[r].pattren.test(y.text)){y.name=n.identifiers[r].name}}}if(!/^(Whitespace|LineComment|MultiComment)$/i.test(y.name)&&!/\)$/.test(y.text)){x=y.name}z.push(y)}}m=m.substr(t[0].length);u=true;break}}}if(!u&&m){z.push({name:"Unknown",text:m})}return z}var c;function b(m,n){if(!c){if(document.createStyleSheet){c=document.createStyleSheet();c.cssText=e}else{c=document.createElement("style");c.setAttribute("type","text/css");c.appendChild(document.createTextNode(e));document.getElementsByTagName("script")[0].parentNode.appendChild(c)}}n=n||h(m);var j=f(m,n);var l=[];l.push('<pre class="Code"><code>');for(var k=0;k<j.length;k++){l.push('<span class="'+j[k].name+'">'+j[k].text.replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</span>")}l.push("</pre></code>");return l.join("")}d.analyze=f;d.exportHtml=b}(AceHighlight);(function(K){var e=K.Markdown=function e(R){switch(typeof R){case"undefined":this.dialect=e.dialects.Gruber;break;case"object":this.dialect=R;break;default:if(R in e.dialects){this.dialect=e.dialects[R]}else{throw new Error("Unknown Markdown dialect '"+String(R)+"'")}break}this.em_state=[];this.strong_state=[];this.debug_indent=""};K.parse=function(T,R){var S=new e(R);return S.toTree(T)};K.toHTML=function u(U,T,S){var R=K.toHTMLTree(U,T,S);return K.renderJsonML(R)};K.toHTMLTree=function w(S,W,U){if(typeof S==="string"){S=this.parse(S,W)}var T=C(S),R={};if(T&&T.references){R=T.references}var V=i(S,R,U);q(V);return V};function f(){return"Markdown.mk_block( "+uneval(this.toString())+", "+uneval(this.trailing)+", "+uneval(this.lineNumber)+" )"}function H(){var R=require("util");return"Markdown.mk_block( "+R.inspect(this.toString())+", "+R.inspect(this.trailing)+", "+R.inspect(this.lineNumber)+" )"}var g=e.mk_block=function(U,S,R){if(arguments.length==1){S="\n\n"}var T=new String(U);T.trailing=S;T.inspect=H;T.toSource=f;if(R!=undefined){T.lineNumber=R}return T};function G(S){var T=0,R=-1;while((R=S.indexOf("\n",R+1))!==-1){T++}return T}e.prototype.split_blocks=function z(T,W){var U=/([\s\S]+?)($|\n(?:\s*\n|$)+)/g,V=[],R;var S=1;if((R=/^(\s*\n)/.exec(T))!=null){S+=G(R[0]);U.lastIndex=R[0].length}while((R=U.exec(T))!==null){V.push(g(R[1],R[2],S));S+=G(R[0])}return V};e.prototype.processBlock=function M(W,V){var S=this.dialect.block,R=S.__order__;if("__call__" in S){return S.__call__.call(this,W,V)}for(var U=0;U<R.length;U++){var T=S[R[U]].call(this,W,V);if(T){if(!A(T)||(T.length>0&&!(A(T[0])))){this.debug(R[U],"didn't return a proper array")}return T}}return[]};e.prototype.processInline=function h(R){return this.dialect.inline.__call__.call(this,String(R))};e.prototype.toTree=function I(T,S){var U=T instanceof Array?T:this.split_blocks(T);var V=this.tree;try{this.tree=S||this.tree||["markdown"];U:while(U.length){var R=this.processBlock(U.shift(),U);if(!R.length){continue U}this.tree.push.apply(this.tree,R)}return this.tree}finally{if(S){this.tree=V}}};e.prototype.debug=function(){var R=Array.prototype.slice.call(arguments);R.unshift(this.debug_indent);if(typeof print!=="undefined"){print.apply(print,R)}if(typeof console!=="undefined"&&typeof console.log!=="undefined"){console.log.apply(null,R)}};e.prototype.loop_re_over_block=function(U,V,T){var S,R=V.valueOf();while(R.length&&(S=U.exec(R))!=null){R=R.substr(S[0].length);T.call(this,S)}return R};e.dialects={};e.dialects.Gruber={block:{atxHeader:function s(T,S){var R=T.match(/^(#{1,6})\s*(.*?)\s*#*\s*(?:\n|$)/);if(!R){return undefined}var U=["header",{level:R[1].length}];Array.prototype.push.apply(U,this.processInline(R[2]));if(R[0].length<T.length){S.unshift(g(T.substr(R[0].length),T.trailing,T.lineNumber+2))}return[U]},setextHeader:function x(T,S){var R=T.match(/^(.*)\n([-=])\2\2+(?:\n|$)/);if(!R){return undefined}var V=(R[2]==="=")?1:2;var U=["header",{level:V},R[1]];if(R[0].length<T.length){S.unshift(g(T.substr(R[0].length),T.trailing,T.lineNumber+2))}return[U]},code:function l(W,V){var T=[],U=/^(?: {0,3}\t| {4})(.*)\n?/,S;if(!W.match(U)){return undefined}block_search:do{var R=this.loop_re_over_block(U,W.valueOf(),function(X){T.push(X[1])});if(R.length){V.unshift(g(R,W.trailing));break block_search}else{if(V.length){if(!V[0].match(U)){break block_search}T.push(W.trailing.replace(/[^\n]/g,"").substring(2));W=V.shift()}else{break block_search}}}while(true);return[["code_block",T.join("\n")]]},horizRule:function P(T,S){var R=T.match(/^(?:([\s\S]*?)\n)?[ \t]*([-_*])(?:[ \t]*\2){2,}[ \t]*(?:\n([\s\S]*))?$/);if(!R){return undefined}var U=[["hr"]];if(R[1]){U.unshift.apply(U,this.processBlock(R[1],[]))}if(R[3]){S.unshift(g(R[3]))}return U},lists:(function(){var U="[*+-]|\\d+\\.",S=/[*+-]/,aa=/\d+\./,Y=new RegExp("^( {0,3})("+U+")[ \t]+"),T="(?: {0,3}\\t| {4})";function V(ab){return new RegExp("(?:^("+T+"{0,"+ab+"} {0,3})("+U+")\\s+)|(^"+T+"{0,"+(ab-1)+"}[ ]{0,4})")}function R(ab){return ab.replace(/ {0,3}\t/g,"    ")}function Z(ac,ai,ah,ad){if(ai){ac.push(["para"].concat(ah));return}var ab=ac[ac.length-1] instanceof Array&&ac[ac.length-1][0]=="para"?ac[ac.length-1]:ac;if(ad&&ac.length>1){ah.unshift(ad)}for(var af=0;af<ah.length;af++){var ag=ah[af],ae=typeof ag=="string";if(ae&&ab.length>1&&typeof ab[ab.length-1]=="string"){ab[ab.length-1]+=ag}else{ab.push(ag)}}}function W(ah,ag){var af=new RegExp("^("+T+"{"+ah+"}.*?\\n?)*$"),ae=new RegExp("^"+T+"{"+ah+"}","gm"),ad=[];while(ag.length>0){if(af.exec(ag[0])){var ac=ag.shift(),ab=ac.replace(ae,"");ad.push(g(ab,ac.trailing,ac.lineNumber))}break}return ad}function X(ae,ad,ab){var ag=ae.list;var af=ag[ag.length-1];if(af[1] instanceof Array&&af[1][0]=="para"){return}if(ad+1==ab.length){af.push(["para"].concat(af.splice(1)))}else{var ac=af.pop();af.push(["para"].concat(af.splice(1)),ac)}}return function(ag,am){var an=ag.match(Y);if(!an){return undefined}function ae(ax){var ay=S.exec(ax[2])?["bulletlist"]:["numberlist"];af.push({list:ay,indent:ax[1]});return ay}var af=[],ar=ae(an),ad,al=false,aw=[af[0].list],ap;loose_search:while(true){var ab=ag.split(/(?=\n)/);var at="";tight_search:for(var au=0;au<ab.length;au++){var ac="",ao=ab[au].replace(/^\n/,function(ax){ac=ax;return""});var aj=V(af.length);an=ao.match(aj);if(an[1]!==undefined){if(at.length){Z(ad,al,this.processInline(at),ac);al=false;at=""}an[1]=R(an[1]);var ah=Math.floor(an[1].length/4)+1;if(ah>af.length){ar=ae(an);ad.push(ar);ad=ar[1]=["listitem"]}else{var ak=false;for(ap=0;ap<af.length;ap++){if(af[ap].indent!=an[1]){continue}ar=af[ap].list;af.splice(ap+1);ak=true;break}if(!ak){ah++;if(ah<=af.length){af.splice(ah);ar=af[ah-1].list}else{ar=ae(an);ad.push(ar)}}ad=["listitem"];ar.push(ad)}ac=""}if(ao.length>an[0].length){at+=ac+ao.substr(an[0].length)}}if(at.length){Z(ad,al,this.processInline(at),ac);al=false;at=""}var aq=W(af.length,am);if(aq.length>0){c(af,X,this);ad.push.apply(ad,this.toTree(aq,[]))}var ai=am[0]&&am[0].valueOf()||"";if(ai.match(Y)||ai.match(/^ /)){ag=am.shift();var av=this.dialect.block.horizRule(ag,am);if(av){aw.push.apply(aw,av);break}c(af,X,this);al=true;continue loose_search}break}return aw}})(),blockquote:function L(W,U){if(!W.match(/^>/m)){return undefined}var Y=[];if(W[0]!=">"){var S=W.split(/\n/),V=[];while(S.length&&S[0][0]!=">"){V.push(S.shift())}W=S.join("\n");Y.push.apply(Y,this.processBlock(V.join("\n"),[]))}while(U.length&&U[0][0]==">"){var R=U.shift();W=new String(W+W.trailing+R);W.trailing=R.trailing}var T=W.replace(/^> ?/gm,""),X=this.tree;Y.push(this.toTree(T,["blockquote"]));return Y},referenceDefn:function J(V,U){var T=/^\s*\[(.*?)\]:\s*(\S+)(?:\s+(?:(['"])(.*?)\3|\((.*?)\)))?\n?/;if(!V.match(T)){return undefined}if(!C(this.tree)){this.tree.splice(1,0,{})}var S=C(this.tree);if(S.references===undefined){S.references={}}var R=this.loop_re_over_block(T,V,function(W){if(W[2]&&W[2][0]=="<"&&W[2][W[2].length-1]==">"){W[2]=W[2].substring(1,W[2].length-1)}var X=S.references[W[1].toLowerCase()]={href:W[2]};if(W[4]!==undefined){X.title=W[4]}else{if(W[5]!==undefined){X.title=W[5]}}});if(R.length){U.unshift(g(R,V.trailing))}return[]},para:function D(S,R){return[["para"].concat(this.processInline(S))]}}};e.dialects.Gruber.inline={__oneElement__:function d(W,S,V){var R,T,X=0;S=S||this.dialect.inline.__patterns__;var U=new RegExp("([\\s\\S]*?)("+(S.source||S)+")");R=U.exec(W);if(!R){return[W.length,W]}else{if(R[1]){return[R[1].length,R[1]]}}var T;if(R[2] in this.dialect.inline){T=this.dialect.inline[R[2]].call(this,W.substr(R.index),R,V||[])}T=T||[R[2].length,R[2]];return T},__call__:function r(V,T){var R=[],S;function U(W){if(typeof W=="string"&&typeof R[R.length-1]=="string"){R[R.length-1]+=W}else{R.push(W)}}while(V.length>0){S=this.dialect.inline.__oneElement__.call(this,V,T,R);V=V.substr(S.shift());c(S,U)}return R},"]":function(){},"}":function(){},"\\":function t(R){if(R.match(/^\\[\\`\*_{}\[\]()#\+.!\-]/)){return[2,R[1]]}else{return[1,"\\"]}},"![":function m(T){var R=T.match(/^!\[(.*?)\][ \t]*\([ \t]*(\S*)(?:[ \t]+(["'])(.*?)\3)?[ \t]*\)/);if(R){if(R[2]&&R[2][0]=="<"&&R[2][R[2].length-1]==">"){R[2]=R[2].substring(1,R[2].length-1)}R[2]=this.dialect.inline.__call__.call(this,R[2],/\\/)[0];var S={alt:R[1],href:R[2]||""};if(R[4]!==undefined){S.title=R[4]}return[R[0].length,["img",S]]}R=T.match(/^!\[(.*?)\][ \t]*\[(.*?)\]/);if(R){return[R[0].length,["img_ref",{alt:R[1],ref:R[2].toLowerCase(),original:R[0]}]]}return[2,"!["]},"[":function n(ab){var Y=String(ab);var W=e.DialectHelpers.inline_until_char.call(this,ab.substr(1),"]");if(!W){return[1,"["]}var Z=1+W[0],S=W[1],X,aa;ab=ab.substr(Z);var U=ab.match(/^\s*\([ \t]*(\S+)(?:[ \t]+(["'])(.*?)\2)?[ \t]*\)/);if(U){var R=U[1];Z+=U[0].length;if(R&&R[0]=="<"&&R[R.length-1]==">"){R=R.substring(1,R.length-1)}if(!U[3]){var T=1;for(var V=0;V<R.length;V++){switch(R[V]){case"(":T++;break;case")":if(--T==0){Z-=R.length-V;R=R.substring(0,V)}break}}}R=this.dialect.inline.__call__.call(this,R,/\\/)[0];aa={href:R||""};if(U[3]!==undefined){aa.title=U[3]}X=["link",aa].concat(S);return[Z,X]}U=ab.match(/^\s*\[(.*?)\]/);if(U){Z+=U[0].length;aa={ref:(U[1]||String(S)).toLowerCase(),original:Y.substr(0,Z)};X=["link_ref",aa].concat(S);return[Z,X]}if(S.length==1&&typeof S[0]=="string"){aa={ref:S[0].toLowerCase(),original:Y.substr(0,Z)};X=["link_ref",aa,S[0]];return[Z,X]}return[1,"["]},"<":function v(S){var R;if((R=S.match(/^<(?:((https?|ftp|mailto):[^>]+)|(.*?@.*?\.[a-zA-Z]+))>/))!=null){if(R[3]){return[R[0].length,["link",{href:"mailto:"+R[3]},R[3]]]}else{if(R[2]=="mailto"){return[R[0].length,["link",{href:R[1]},R[1].substr("mailto:".length)]]}else{return[R[0].length,["link",{href:R[1]},R[1]]]}}}return[1,"<"]},"`":function y(S){var R=S.match(/(`+)(([\s\S]*?)\1)/);if(R&&R[2]){return[R[1].length+R[2].length,["inlinecode",R[3]]]}else{return[1,"`"]}},"  \n":function O(R){return[3,["linebreak"]]}};function F(R,U){var T=R+"_state",V=R=="strong"?"em_state":"strong_state";function S(W){this.len_after=W;this.name="close_"+U}return function(ad,ac){if(this[T][0]==U){this[T].shift();return[ad.length,new S(ad.length-U.length)]}else{var W=this[V].slice(),ab=this[T].slice();this[T].unshift(U);var Y=this.processInline(ad.substr(U.length));var Z=Y[Y.length-1];var X=this[T].shift();if(Z instanceof S){Y.pop();var aa=ad.length-Z.len_after;return[aa,[R].concat(Y)]}else{this[V]=W;this[T]=ab;return[U.length,U]}}}}e.dialects.Gruber.inline["**"]=F("strong","**");e.dialects.Gruber.inline.__=F("strong","__");e.dialects.Gruber.inline["*"]=F("em","*");e.dialects.Gruber.inline._=F("em","_");e.buildBlockOrder=function(T){var R=[];for(var S in T){if(S=="__order__"||S=="__call__"){continue}R.push(S)}T.__order__=R};e.buildInlinePatterns=function(V){var U=[];for(var S in V){if(S.match(/^__.*__$/)){continue}var R=S.replace(/([\\.*+?|()\[\]{}])/g,"\\$1").replace(/\n/,"\\n");U.push(S.length==1?R:"(?:"+R+")")}U=U.join("|");V.__patterns__=U;var T=V.__call__;V.__call__=function(X,W){if(W!=undefined){return T.call(this,X,W)}else{return T.call(this,X,U)}}};e.DialectHelpers={};e.DialectHelpers.inline_until_char=function(U,T){var S=0,R=[];while(true){if(U[S]==T){S++;return[S,R]}if(S>=U.length){return null}res=this.dialect.inline.__oneElement__.call(this,U.substr(S));S+=res[0];R.push.apply(R,res.slice(1))}};e.subclassDialect=function(T){function R(){}R.prototype=T.block;function S(){}S.prototype=T.inline;return{block:new R(),inline:new S()}};e.buildBlockOrder(e.dialects.Gruber.block);e.buildInlinePatterns(e.dialects.Gruber.inline);e.dialects.Maruku=e.subclassDialect(e.dialects.Gruber);e.dialects.Maruku.processMetaHash=function k(U){var V=o(U),R={};for(var S=0;S<V.length;++S){if(/^#/.test(V[S])){R.id=V[S].substring(1)}else{if(/^\./.test(V[S])){if(R["class"]){R["class"]=R["class"]+V[S].replace(/./," ")}else{R["class"]=V[S].substring(1)}}else{if(/\=/.test(V[S])){var T=V[S].split(/\=/);R[T[0]]=T[1]}}}}return R};function o(T){var V=T.split(""),U=[""],R=false;while(V.length){var S=V.shift();switch(S){case" ":if(R){U[U.length-1]+=S}else{U.push("")}break;case"'":case'"':R=!R;break;case"\\":S=V.shift();default:U[U.length-1]+=S;break}}return U}e.dialects.Maruku.block.document_meta=function j(W,T){if(W.lineNumber>1){return undefined}if(!W.match(/^(?:\w+:.*\n)*\w+:.*$/)){return undefined}if(!C(this.tree)){this.tree.splice(1,0,{})}var V=W.split(/\n/);for(p in V){var R=V[p].match(/(\w+):\s*(.*)$/),S=R[1].toLowerCase(),U=R[2];this.tree[1][S]=U}return[]};e.dialects.Maruku.block.block_meta=function E(Y,V){var U=Y.match(/(^|\n) {0,3}\{:\s*((?:\\\}|[^\}])*)\s*\}$/);if(!U){return undefined}var T=this.dialect.processMetaHash(U[2]);var X;if(U[1]===""){var W=this.tree[this.tree.length-1];X=C(W);if(typeof W==="string"){return undefined}if(!X){X={};W.splice(1,0,X)}for(a in T){X[a]=T[a]}return[]}var S=Y.replace(/\n.*$/,""),R=this.processBlock(S,[]);X=C(R[0]);if(!X){X={};R[0].splice(1,0,X)}for(a in T){X[a]=T[a]}return R};e.dialects.Maruku.block.definition_list=function N(T,W){var Y=/^((?:[^\s:].*\n)+):\s+([\s\S]+)$/,X=["dl"],V;if((S=T.match(Y))){var R=[T];while(W.length&&Y.exec(W[0])){R.push(W.shift())}for(var Z=0;Z<R.length;++Z){var S=R[Z].match(Y),U=S[1].replace(/\n$/,"").split(/\n/),aa=S[2].split(/\n:\s+/);for(V=0;V<U.length;++V){X.push(["dt",U[V]])}for(V=0;V<aa.length;++V){X.push(["dd"].concat(this.processInline(aa[V].replace(/(\n)\s+/,"$1"))))}}}else{return undefined}return[X]};e.dialects.Maruku.inline["{:"]=function B(Y,W,U){if(!U.length){return[2,"{:"]}var V=U[U.length-1];if(typeof V==="string"){return[2,"{:"]}var S=Y.match(/^\{:\s*((?:\\\}|[^\}])*)\s*\}/);if(!S){return[2,"{:"]}var X=this.dialect.processMetaHash(S[1]),R=C(V);if(!R){R={};V.splice(1,0,R)}for(var T in X){R[T]=X[T]}return[S[0].length,""]};e.buildBlockOrder(e.dialects.Maruku.block);e.buildInlinePatterns(e.dialects.Maruku.inline);var A=Array.isArray||function(R){return Object.prototype.toString.call(R)=="[object Array]"};var c;if(Array.prototype.forEach){c=function(S,R,T){return S.forEach(R,T)}}else{c=function(S,R,U){for(var T=0;T<S.length;T++){R.call(U||S,S[T],T,S)}}}function C(R){return A(R)&&R.length>1&&typeof R[1]==="object"&&!(A(R[1]))?R[1]:undefined}K.renderJsonML=function(T,R){R=R||{};R.root=R.root||false;var S=[];if(R.root){S.push(Q(T))}else{T.shift();if(T.length&&typeof T[0]==="object"&&!(T[0] instanceof Array)){T.shift()}while(T.length){S.push(Q(T.shift()))}}return S.join("\n\n")};function b(R){return R.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function Q(W){if(typeof W==="string"){return b(W)}var R=W.shift(),T={},U=[];if(W.length&&typeof W[0]==="object"&&!(W[0] instanceof Array)){T=W.shift()}while(W.length){U.push(arguments.callee(W.shift()))}var V="";for(var S in T){V+=" "+S+'="'+b(T[S])+'"'}if(R=="img"||R=="br"||R=="hr"){return"<"+R+V+"/>"}else{return"<"+R+V+">"+U.join("")+"</"+R+">"}}function i(Z,W,Y){var T;Y=Y||{};var V=Z.slice(0);if(typeof Y.preprocessTreeNode==="function"){V=Y.preprocessTreeNode(V,W)}var X=C(V);if(X){V[1]={};for(T in X){V[1][T]=X[T]}X=V[1]}if(typeof V==="string"){return V}switch(V[0]){case"header":V[0]="h"+V[1].level;delete V[1].level;break;case"bulletlist":V[0]="ul";break;case"numberlist":V[0]="ol";break;case"listitem":V[0]="li";break;case"para":V[0]="p";break;case"markdown":V[0]="html";if(X){delete X.references}break;case"code_block":V[0]="pre";T=X?2:1;var R=["code"];R.push.apply(R,V.splice(T));V[T]=R;break;case"inlinecode":V[0]="code";break;case"img":V[1].src=V[1].href;delete V[1].href;break;case"linebreak":V[0]="br";break;case"link":V[0]="a";break;case"link_ref":V[0]="a";var S=W[X.ref];if(S){delete X.ref;X.href=S.href;if(S.title){X.title=S.title}delete X.original}else{return X.original}break;case"img_ref":V[0]="img";var S=W[X.ref];if(S){delete X.ref;X.src=S.href;if(S.title){X.title=S.title}delete X.original}else{return X.original}break}T=1;if(X){for(var U in V[1]){T=2}if(T===1){V.splice(T,1)}}for(;T<V.length;++T){V[T]=arguments.callee(V[T],W,Y)}return V}function q(S){var R=C(S)?2:1;while(R<S.length){if(typeof S[R]==="string"){if(R+1<S.length&&typeof S[R+1]==="string"){S[R]+=S.splice(R+1,1)[0]}else{++R}}else{arguments.callee(S[R]);++R}}}})((function(){if(typeof exports==="undefined"){window.markdown={};return window.markdown}else{return exports}})());var ChannelCommon=typeof exports=="undefined"?ChannelCommon||{}:exports;void function(c){function e(h,g){if(!g){return h}return h.replace(/\#\{(.+?)\}/g,function(){return g[arguments[1]]})}function f(g,k){if(g instanceof Array){for(var h=0;h<g.length;h++){if(k(g[h],h)===false){return false}}}else{if(typeof g=="object"){for(var j in g){if(k(g[j],j)===false){return false}}}}}function b(g){return String(g||"").replace(/\\/g,"\\\\").replace(/'/g,"''")}var d={maxNick:20,maxWeibo:150,maxLetter:4000,maxTalk:2000,checkNick:function(g){if(!g||/^\s+$/.test(g)){return"昵称不能为空"}if(g.length>this.maxNick){return this.format("昵称长度不能超过#{0}",[this.maxNick])}if(/@/.test(g)){return"昵称不能带@"}},checkWeibo:function(g){if(/^\s+$/.test(g)){return"微博不能为空"}if(!g){return}if(g.length>this.maxWeibo){return this.format("昵称长度不能超过#{0}",[this.maxWeibo])}if(!(/^http:\/\/(weibo\.com|t\.qq\.com|t\.163\.com)\/\w+$/.test(g))){return"微博格式不正确，仅只支持：http://weibo.com|http://t.qq.com|http://t.163.com"}},checkLetter:function(g){if(!g||/^\s+$/.test(g)){return"私信不能为空"}if(g.length>this.maxLetter){return this.format("私信长度不能超过#{0}",[this.maxLetter])}},checkTalk:function(g){if(!g||/^\s+$/.test(g)){return"对话内容不能为空"}if(g.length>this.maxTalk){return this.format("对话内容长度不能超过#{0}",[this.maxTalk])}},format:e,forEach:f,safeParam:b};f(d,function(h,g){c[g]=h})}(ChannelCommon);AceCore.addConfig("ChatApi",{pickMaxWait:45*1000,apiHost:"http://renrousousuo.com:8080"});if(/debug/.test(location)){AceCore.addConfig("ChatApi",{apiHost:"http://localhost:2012"})}AceCore.addExtension("ChatApi",function(j){var f=j.getLib();var c=j.getConfig();function i(m){var k=[];for(var l in m){k.push([encodeURIComponent(l),encodeURIComponent(m[l])].join("="))}return k.join("&")}function h(l){var k={};String(l).replace(/([^?&#]+)=([^?&#]*)/g,function(n,m,o){k[m]=o});return k}var g=h(document.location.search);var b=g.api?"http://"+g.api:c.apiHost;var d;var e;if(window.localStorage){e=localStorage.getItem(b+":passport")}return{getApiHost:function(){return b},pick:function(l,n){if(!l||!n){return}var m=setTimeout(function(){m=0;n({result:"overtime"});n=function(){}},c.pickMaxWait);if(e){l.passport=e}var k=[b+"/pick",i(l)].join("?");j.log(k);f.sio.callByServer(k,function(o){m&&clearTimeout(m);m=0;if(o.result=="ok"){f.each(o.fields,function(q){switch(q.type){case"passport":d=q.info;var r=h(f.cookie.get("passport"));if(r.id==d.id&&r.visa==d.visa&&r.mask==d.mask){e=""}else{if(window.localStorage){e=ChannelCommon.format("id=#{id}&visa=#{visa}&mask=#{mask}",d);localStorage.setItem(b+":passport",e)}}break}})}n(o)})},command:function(l,m){if(!l){return}if(e){l.passport=e}var k=[b+"/command",i(l)].join("?");j.log(k);f.sio.callByServer(k,function(n){m&&m(n)})}}});AceCore.addConfig("Events",{pickSuccess:1,showDialog:2,playerFocus:3,letterDialog:4,viewLetter:5,nick:6,talk:7,vote:8,weibo:9,move:10,role:11});AceCore.addModule("Manager",function(m){var n=m.getConfig("Events");var k=m.getLib();var e=m.getExtension("ChatApi");var i;var o=0;function h(){e.pick({channel:i,seq:o},function(q){if(!q||q.result!="ok"){m.log(q);if(!q||q.result=="overtime"||(q.result!="kill"&&q.channel==i)){h()}return}if(q.channel==i&&o==q.currSeq){if("nextSeq" in q){o=q.nextSeq;m.log("seq change to:"+o)}if("fields" in q){m.fire(n.pickSuccess,q.fields)}setTimeout(function(){h()},100)}})}function d(q){if(q==i){return}e.command({channel:i,desc:q,command:"goto"});i=q;l()}function l(){e.command({channel:i,command:"enter",refer:document.referrer},function(q){q=q||{};if(q.result!="ok"){m.fire(n.showDialog,{type:"error",message:q.error||"enter channel error."});return}o=0;setTimeout(function(){h()},0)})}function b(q){e.command({channel:i,command:"nick",nick:q},j)}function c(q){e.command({channel:i,command:"weibo",weibo:q},j)}function g(q){e.command({channel:i,command:"talk",format:q.format,text:q.text},function(r){if(!r||r.result!="ok"){return}r.error&&m.fire(n.showDialog,{type:"error",message:r.error});k.g("editor").value=""})}function f(q){e.command({channel:i,command:"vote",id:q},j)}function j(q){q.error&&m.fire(n.showDialog,{type:"error",message:q.error})}return{init:function(){m.on(n.nick,b);m.on(n.talk,g);m.on(n.vote,f);m.on(n.weibo,c);AceTemplate.register();k.on(window,"hashchange",function(){d(location.hash.replace(/^#/,""))});i=location.hash.replace(/^#/,"")||"home";l()}}});AceCore.addModule("MessageBox",function(g){var i=g.getConfig("Events");var e=g.getLib();var f;var c={};function j(k){e.each(k,function(l){switch(l.type){case"passport":c=l.info;break;case"messageAll":f.loadChilds(l.messages);b();break;case"messageAdd":f.appendChilds(l.messages);b();break}})}function b(){var k=f.parent.parentNode;k.scrollTop=k.scrollHeight}function h(l){l=new Date(l);var m=e.date.format(l,"HH:mm:ss");var k=e.date.format(l,"yyyy-MM-dd");return e.date.format(new Date,"yyyy-MM-dd")==k?m:[k,m].join(" ")}function d(k){return e.encodeHTML(k).replace(/\n/g,"<br/>")}return{init:function(){AceUbb.addPlugin("color",function(k){return String(k).replace(/\[(red|orange|yellow|green|blue|indigo|violet|beige|black|brown|gray|navy|silver|tan)\]([\s\S]*?)\[\/\1\]/g,function(m,l,n){return'<span style="color:'+l+';">'+n+"</span>"})});AceUbb.addPlugin("weibo",function(k){var l={"[bm做操]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/09/bmzuocao_thumb.gif","[bm抓狂]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/60/bmzhuakuang_thumb.gif","[bm中枪]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/ff/bmzhongqiang_thumb.gif","[bm震惊]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/63/bmzhenjing_thumb.gif","[bm赞]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/c9/bmzan_thumb.gif","[bm喜悦]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/47/bmxiyue_thumb.gif","[bm醒悟]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/8f/bmxingwu_thumb.gif","[bm兴奋]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/a7/bmxingfen_thumb.gif","[bm血泪]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/0d/bmxielei_thumb.gif","[bm挖鼻孔]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/bd/bmwabikong_thumb.gif","[bm吐舌头]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/8f/bmtushetou_thumb.gif","[bm吐槽]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/73/bmtucao_thumb.gif","[bm投诉]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/04/bmtousu_thumb.gif","[bm跳绳]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/2a/bmtiaosheng_thumb.gif","[bm调皮]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/da/bmtiaopi_thumb.gif","[bm讨论]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/20/bmtaolun_thumb.gif","[bm抬腿]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/86/bmtaitui_thumb.gif","[bm思考]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/0f/bmsikao_thumb.gif","[bm生气]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/8f/bmshengqi_thumb.gif","[bm亲吻]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/a4/bmqinwen_thumb.gif","[bm庆幸]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/6c/bmqingxing_thumb.gif","[bm内涵]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/66/bmneihan_thumb.gif","[bm忙碌]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/18/bmmanglu_thumb.gif","[bm乱入]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/a9/bmluanru_thumb.gif","[bm卖萌]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/ba/bmluanmeng_thumb.gif","[bm流泪]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/d6/bmliulei_thumb.gif","[bm流口水]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/a4/bmliukoushui_thumb.gif","[bm流鼻涕]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/4f/bmliubiti_thumb.gif","[bm路过]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/75/bmliguo_thumb.gif","[bm咧嘴]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/3e/bmliezui_thumb.gif","[bm啦啦队]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/4e/bmlaladui_thumb.gif","[bm哭诉]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/9b/bmkusu_thumb.gif","[bm哭泣]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/a8/bmkuqi_thumb.gif","[bm苦逼]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/dc/bmkubi_thumb.gif","[bm口哨]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/0c/bmkoushao_thumb.gif","[bm可爱]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/95/bmkeai_thumb.gif","[bm紧张]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/4c/bmjinzhang_thumb.gif","[bm惊讶]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/03/bmjingya_thumb.gif","[bm惊吓]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/be/bmjingxia_thumb.gif","[bm焦虑]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/4e/bmjiaolv_thumb.gif","[bm会心笑]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/7e/bmhuixinxiao_thumb.gif","[bm坏笑]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/ec/bmhuaixiao_thumb.gif","[bm花痴]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/4b/bmhuachi_thumb.gif","[bm厚脸皮]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/61/bmhoulianpi_thumb.gif","[bm好吧]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/16/bmhaoba_thumb.gif","[bm害怕]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/6c/bmhaipa_thumb.gif","[bm鬼脸]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/15/bmguilian_thumb.gif","[bm孤独]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/e4/bmgudu_thumb.gif","[bm高兴]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/85/bmgaoxing_thumb.gif","[bm搞怪]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/4b/bmgaoguai_thumb.gif","[bm干笑]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/b4/bmganxiao_thumb.gif","[bm感动]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/34/bmgandong_thumb.gif","[bm愤懑]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/fc/bmfenmen_thumb.gif","[bm反对]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/b6/bmfandui_thumb.gif","[bm踱步]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/54/bmduobu_thumb.gif","[bm顶]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/34/bmding_thumb.gif","[bm得意]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/7a/bmdeyi_thumb.gif","[bm得瑟]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/7d/bmdese_thumb.gif","[bm大笑]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/37/bmdaxiao_thumb.gif","[bm蛋糕]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/f8/bmdangao_thumb.gif","[bm大哭]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/dc/bmdaku_thumb.gif","[bm大叫]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/83/bmdajiao_thumb.gif","[bm吃惊]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/b0/bmchijing_thumb.gif","[bm馋]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/d9/bmchan_thumb.gif","[bm彩色]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/7e/bmcaise_thumb.gif","[bm缤纷]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/15/bmbinfen_thumb.gif","[bm变身]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/b7/bmbianshen_thumb.gif","[bm悲催]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/77/bmbeicui_thumb.gif","[bm暴怒]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/12/bmbaonu_thumb.gif","[bm熬夜]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/a4/bmaoye_thumb.gif","[bm暗爽]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/bc/bmanshuang_thumb.gif","[月儿圆]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/3d/lxhyueeryuan_thumb.gif","[招财]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/a9/lxhzhaocai_thumb.gif","[微博三岁啦]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/1e/lxhweibo3yr_thumb.gif","[复活节]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/d6/lxhfuhuojie_thumb.gif","[挤火车]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/09/lxhjihuoche_thumb.gif","[愚人节]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/21/lxhyurenjie_thumb.gif","[收藏]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/83/lxhshoucang_thumb.gif","[喜得金牌]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/a2/lxhhappygold_thumb.gif","[夺冠感动]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/69/lxhduoguan_thumb.gif","[冠军诞生]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/2c/lxhguanjun_thumb.gif","[传火炬]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/f2/lxhchuanhuoju_thumb.gif","[奥运金牌]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/06/lxhgold_thumb.gif","[奥运银牌]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/43/lxhbronze_thumb.gif","[奥运铜牌]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/fd/lxhsilver_thumb.gif","[德国队加油]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/12/germany_thumb.gif","[西班牙队加油]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/be/spain_thumb.gif","[葡萄牙队加油]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/f8/portugal_thumb.gif","[意大利队加油]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/03/italy_thumb.gif","[耍花灯]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/be/lxhshuahuadeng_thumb.gif","[元宵快乐]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/83/lxhyuanxiaohappy_thumb.gif","[吃汤圆]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/52/lxhchitangyuan_thumb.gif","[金元宝]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/9b/lxhjinyuanbao_thumb.gif","[红包拿来]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/bd/lxhhongbaonalai_thumb.gif","[福到啦]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/f4/lxhfudaola_thumb.gif","[放鞭炮]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/bd/lxhbianpao_thumb.gif","[发红包]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/27/lxhhongbao_thumb.gif","[大红灯笼]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/90/lxhdahongdenglong_thumb.gif","[拜年了]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/0c/lxhbainianle_thumb.gif","[龙啸]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/cd/lxhlongxiao_thumb.gif","[光棍节]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/5b/lxh1111_thumb.gif","[蛇年快乐]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/5f/lxhshenian_thumb.gif","[过年啦]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/94/lxhguonianla_thumb.gif","[圆蛋快乐]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/eb/lxhyuandan_thumb.gif","[发礼物]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/24/lxh_santa_thumb.gif","[要礼物]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/d2/lxh_gift_thumb.gif","[平安果]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/0f/lxh_apple_thumb.gif","[吓到了]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/fa/lxhscare_thumb.gif","[走你]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/ed/zouni_thumb.gif","[吐血]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/8c/lxhtuxue_thumb.gif","[好激动]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/ae/lxhjidong_thumb.gif","[没人疼]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/23/lxhlonely_thumb.gif","[转发]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/02/lxhzhuanfa_thumb.gif","[笑哈哈]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/32/lxhwahaha_thumb.gif","[得意地笑]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/d4/lxhdeyidixiao_thumb.gif","[噢耶]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/3b/lxhxixi_thumb.gif","[偷乐]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/fa/lxhtouxiao_thumb.gif","[泪流满面]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/64/lxhtongku_thumb.gif","[巨汗]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/f6/lxhjuhan_thumb.gif","[抠鼻屎]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/48/lxhkoubishi_thumb.gif","[求关注]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/ac/lxhqiuguanzhu_thumb.gif","[真V5]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/3a/lxhv5_thumb.gif","[群体围观]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/a8/lxhweiguan_thumb.gif","[hold住]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/05/lxhholdzhu_thumb.gif","[羞嗒嗒]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/df/lxhxiudada_thumb.gif","[非常汗]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/42/lxhpubuhan_thumb.gif","[许愿]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/87/lxhxuyuan_thumb.gif","[崩溃]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/c7/lxhzhuakuang_thumb.gif","[好囧]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/96/lxhhaojiong_thumb.gif","[震惊]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/e7/lxhchijing_thumb.gif","[别烦我]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/22/lxhbiefanwo_thumb.gif","[不好意思]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/b4/lxhbuhaoyisi_thumb.gif","[纠结]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/1f/lxhjiujie_thumb.gif","[拍手]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/e3/lxhguzhang_thumb.gif","[给劲]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/a5/lxhgeili_thumb.gif","[好喜欢]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/d6/lxhlike_thumb.gif","[好爱哦]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/74/lxhainio_thumb.gif","[路过这儿]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/ac/lxhluguo_thumb.gif","[悲催]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/43/lxhbeicui_thumb.gif","[不想上班]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/6b/lxhbuxiangshangban_thumb.gif","[躁狂症]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/ca/lxhzaokuangzheng_thumb.gif","[甩甩手]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/a6/lxhshuaishuaishou_thumb.gif","[瞧瞧]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/8b/lxhqiaoqiao_thumb.gif","[同意]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/14/lxhtongyi_thumb.gif","[喝多了]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/a7/lxhheduole_thumb.gif","[啦啦啦啦]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/3d/lxhlalalala_thumb.gif","[杰克逊]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/e5/lxhjiekexun_thumb.gif","[雷锋]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/7a/lxhleifeng_thumb.gif","[带感]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/d2/lxhdaigan_thumb.gif","[亲一口]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/88/lxhqinyikou_thumb.gif","[飞个吻]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/8a/lxhblowakiss_thumb.gif","[加油啊]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/03/lxhjiayou_thumb.gif","[七夕]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/9a/lxhqixi_thumb.gif","[困死了]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/00/lxhkunsile_thumb.gif","[有鸭梨]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/7e/lxhyouyali_thumb.gif","[右边亮了]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/ae/lxhliangle_thumb.gif","[撒花]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/b3/lxhfangjiala_thumb.gif","[好棒]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/3e/lxhhaobang_thumb.gif","[想一想]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/e9/lxhxiangyixiang_thumb.gif","[下班]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/f2/lxhxiaban_thumb.gif","[最右]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/c8/lxhzuiyou_thumb.gif","[丘比特]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/35/lxhqiubite_thumb.gif","[中箭]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/81/lxhzhongjian_thumb.gif","[互相膜拜]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/3c/lxhhuxiangmobai_thumb.gif","[膜拜了]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/52/lxhmobai_thumb.gif","[放电抛媚]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/d0/lxhfangdianpaomei_thumb.gif","[霹雳]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/41/lxhshandian_thumb.gif","[被电]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/ed/lxhbeidian_thumb.gif","[拍砖]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/3b/lxhpaizhuan_thumb.gif","[互相拍砖]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/5b/lxhhuxiangpaizhuan_thumb.gif","[采访]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/8b/lxhcaifang_thumb.gif","[发表言论]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/f1/lxhfabiaoyanlun_thumb.gif","[江南style]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/67/gangnamstyle_thumb.gif","[牛]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/24/lxhniu_thumb.gif","[玫瑰]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/f6/lxhrose_thumb.gif","[赞啊]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/00/lxhzan_thumb.gif","[推荐]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/e9/lxhtuijian_thumb.gif","[放假啦]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/37/lxhfangjiale_thumb.gif","[萌翻]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/99/lxhmengfan_thumb.gif","[吃货]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/ba/lxhgreedy_thumb.gif","[大南瓜]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/4d/lxhpumpkin_thumb.gif","[赶火车]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/a2/lxhganhuoche_thumb.gif","[立志青年]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/f9/lxhlizhiqingnian_thumb.gif","[得瑟]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/ca/lxhdese_thumb.gif","[草泥马]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/7a/shenshou_thumb.gif","[神马]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/60/horse2_thumb.gif","[浮云]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/bc/fuyun_thumb.gif","[给力]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/c9/geili_thumb.gif","[围观]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/f2/wg_thumb.gif","[威武]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/70/vw_thumb.gif","[熊猫]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/6e/panda_thumb.gif","[兔子]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/81/rabbit_thumb.gif","[奥特曼]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/bc/otm_thumb.gif","[囧]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/15/j_thumb.gif","[互粉]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/89/hufen_thumb.gif","[礼物]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/c4/liwu_thumb.gif","[呵呵]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/ac/smilea_thumb.gif","[嘻嘻]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/0b/tootha_thumb.gif","[哈哈]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/6a/laugh.gif","[可爱]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/14/tza_thumb.gif","[可怜]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/af/kl_thumb.gif","[挖鼻屎]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/a0/kbsa_thumb.gif","[吃惊]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/f4/cj_thumb.gif","[害羞]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/6e/shamea_thumb.gif","[挤眼]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/c3/zy_thumb.gif","[闭嘴]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/29/bz_thumb.gif","[鄙视]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/71/bs2_thumb.gif","[爱你]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/6d/lovea_thumb.gif","[泪]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/9d/sada_thumb.gif","[偷笑]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/19/heia_thumb.gif","[亲亲]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/8f/qq_thumb.gif","[生病]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/b6/sb_thumb.gif","[太开心]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/58/mb_thumb.gif","[懒得理你]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/17/ldln_thumb.gif","[右哼哼]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/98/yhh_thumb.gif","[左哼哼]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/6d/zhh_thumb.gif","[嘘]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/a6/x_thumb.gif","[衰]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/af/cry.gif","[委屈]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/73/wq_thumb.gif","[吐]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/9e/t_thumb.gif","[打哈欠]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/f3/k_thumb.gif","[抱抱]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/27/bba_thumb.gif","[怒]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/7c/angrya_thumb.gif","[疑问]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/5c/yw_thumb.gif","[馋嘴]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/a5/cza_thumb.gif","[拜拜]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/70/88_thumb.gif","[思考]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/e9/sk_thumb.gif","[汗]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/24/sweata_thumb.gif","[困]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/7f/sleepya_thumb.gif","[睡觉]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/6b/sleepa_thumb.gif","[钱]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/90/money_thumb.gif","[失望]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/0c/sw_thumb.gif","[酷]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/40/cool_thumb.gif","[花心]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/8c/hsa_thumb.gif","[哼]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/49/hatea_thumb.gif","[鼓掌]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/36/gza_thumb.gif","[晕]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/d9/dizzya_thumb.gif","[悲伤]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/1a/bs_thumb.gif","[抓狂]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/62/crazya_thumb.gif","[黑线]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/91/h_thumb.gif","[阴险]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/6d/yx_thumb.gif","[怒骂]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/89/nm_thumb.gif","[心]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/40/hearta_thumb.gif","[伤心]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/ea/unheart.gif","[猪头]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/58/pig.gif","[ok]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/d6/ok_thumb.gif","[耶]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/d9/ye_thumb.gif","[good]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/d8/good_thumb.gif","[不要]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/c7/no_thumb.gif","[赞]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/d0/z2_thumb.gif","[来]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/40/come_thumb.gif","[弱]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/d8/sad_thumb.gif","[蜡烛]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/91/lazu_thumb.gif","[钟]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/d3/clock_thumb.gif","[话筒]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/1b/m_thumb.gif","[蛋糕]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/6a/cake.gif","[挤眼]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/c3/zy_thumb.gif","[亲亲]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/8f/qq_thumb.gif","[怒骂]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/89/nm_thumb.gif","[太开心]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/58/mb_thumb.gif","[懒得理你]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/17/ldln_thumb.gif","[打哈欠]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/f3/k_thumb.gif","[生病]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/b6/sb_thumb.gif","[书呆子]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/61/sdz_thumb.gif","[失望]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/0c/sw_thumb.gif","[可怜]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/af/kl_thumb.gif","[黑线]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/91/h_thumb.gif","[吐]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/9e/t_thumb.gif","[委屈]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/73/wq_thumb.gif","[思考]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/e9/sk_thumb.gif","[哈哈]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/6a/laugh.gif","[嘘]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/a6/x_thumb.gif","[右哼哼]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/98/yhh_thumb.gif","[左哼哼]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/6d/zhh_thumb.gif","[疑问]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/5c/yw_thumb.gif","[阴险]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/6d/yx_thumb.gif","[顶]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/91/d_thumb.gif","[钱]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/90/money_thumb.gif","[悲伤]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/1a/bs_thumb.gif","[鄙视]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/71/bs2_thumb.gif","[拜拜]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/70/88_thumb.gif","[吃惊]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/f4/cj_thumb.gif","[闭嘴]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/29/bz_thumb.gif","[衰]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/af/cry.gif","[愤怒]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/bd/fn_thumb.gif","[感冒]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/a0/gm_thumb.gif","[酷]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/40/cool_thumb.gif","[来]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/40/come_thumb.gif","[good]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/d8/good_thumb.gif","[haha]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/13/ha_thumb.gif","[不要]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/c7/no_thumb.gif","[ok]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/d6/ok_thumb.gif","[拳头]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/cc/o_thumb.gif","[弱]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/d8/sad_thumb.gif","[握手]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/0c/ws_thumb.gif","[赞]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/d0/z2_thumb.gif","[耶]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/d9/ye_thumb.gif","[最差]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/3e/bad_thumb.gif","[打哈气]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/f3/k_thumb.gif","[可爱]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/14/tza_thumb.gif","[嘻嘻]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/0b/tootha_thumb.gif","[汗]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/24/sweata_thumb.gif","[呵呵]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/ac/smilea_thumb.gif","[困]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/7f/sleepya_thumb.gif","[睡觉]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/6b/sleepa_thumb.gif","[害羞]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/6e/shamea_thumb.gif","[泪]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/9d/sada_thumb.gif","[爱你]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/6d/lovea_thumb.gif","[挖鼻屎]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/a0/kbsa_thumb.gif","[花心]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/8c/hsa_thumb.gif","[偷笑]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/19/heia_thumb.gif","[心]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/40/hearta_thumb.gif","[哼]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/49/hatea_thumb.gif","[鼓掌]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/36/gza_thumb.gif","[晕]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/d9/dizzya_thumb.gif","[馋嘴]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/a5/cza_thumb.gif","[抓狂]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/62/crazya_thumb.gif","[抱抱]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/27/bba_thumb.gif","[怒]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/7c/angrya_thumb.gif","[右抱抱]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/0d/right_thumb.gif","[左抱抱]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/54/left_thumb.gif"};return String(k).replace(/\[([^\]]*)\]/g,function(m){return l[m]?'<img src="'+l[m]+'" alt="'+m+'">':m})});f=AceTree.create({parent:e.g("messageListTemplate").parentNode,oninit:function(k){k.eventHandler=AceEvent.on(k.parent,function(o,l,n){var m=k.node4target(l);m&&k.oncommand(o,m,n)})},onreader:function(k){return AceTemplate.format("messageListTemplate",k.data,{node:k,formatTime:h,mutiline:d,markdown:function(l){return markdown.toHTML(l)},ubb:function(l){return AceUbb.exportHtml(l)}})},oncommand:function(m,k,l){switch(m){case"letter":g.fire(i.letterDialog,{nick:k.data.nick,to:k.data.from});break}},statusClasses:/^(focus|hover|select|expand|self)$/,oncreated:function(k){k.setStatus("self",k.data.from==c.id,true)}});g.on(i.pickSuccess,j)}}});AceCore.addModule("PlayerBox",function(b){var d=b.getConfig("Events");var f=b.getLib();var c;var g={};function e(h){f.each(h,function(i){switch(i.type){case"passport":g=i.info;break;case"playerAll":c.loadChilds(i.players);break;case"playerAdd":c.appendChilds(i.players);break;case"playerUpdate":f.each(i.players,function(j){var k=c.updateData(j);if(g.id==j.id){g.nick=k.data.nick}});break;case"playerRemove":f.each(i.players,function(j){c.removeNode(j)});break}})}return{init:function(){c=AceTree.create({parent:f.g("playerListTemplate").parentNode,oninit:function(h){h.eventHandler=AceEvent.on(h.parent,function(l,k,j){var i=h.node4target(k);i&&h.oncommand(l,i,j)})},onreader:function(h){return AceTemplate.format("playerListTemplate",h.data,{node:h})},oncommand:function(j,h,i){switch(j){case"focus":h.focus();b.fire(d.playerFocus,{info:h.data});break;case"letter":b.fire(d.letterDialog,{nick:h.data.nick,to:h.data.id});break}},statusClasses:/^(focus|hover|select|expand|self)$/,oncreated:function(h){h.setStatus("self",h.data.id==g.id,true)}});b.on(d.pickSuccess,e);AceEvent.on("playerTools",function(h){switch(h){case"nick":b.fire(d.showDialog,{type:"nick",maxNick:ChannelCommon.maxNick,nick:g.nick,oncommand:function(l,k){if(l!="ok"){return}var i=f.g("inputNick").value;var j=ChannelCommon.checkNick(i);if(j){b.fire(d.showDialog,{type:"error",message:j});return true}if(i!=k.nick){b.fire(d.nick,i)}},onshow:function(j){var i=f.g("inputNick");i.setSelectionRange(0,i.value.length);i.focus()}});break;case"weibo":b.fire(d.showDialog,{type:"weibo",maxWeibo:ChannelCommon.maxWeibo,weibo:g.weibo||"http://weibo.com/",oncommand:function(l,j){if(l!="ok"){return}var k=f.g("inputWeibo").value;var i=ChannelCommon.checkWeibo(k);if(i){b.fire(d.showDialog,{type:"error",message:i});return true}if(k!=j.weibo){b.fire(d.weibo,k)}},onshow:function(k){var i=f.g("inputWeibo");var j=i.value.length;i.setSelectionRange&&i.setSelectionRange(j,j);i.focus()}});break;case"viewLetter":b.fire(d.viewLetter);break}})}}});AceCore.addModule("EditorBox",function(b){var c=b.getConfig("Events");var d=b.getLib();return{init:function(){var e=AceEvent.on("editorTools",function(n,j,l){switch(n){case"send":var m=d.g("editor").value;var f=document.getElementsByName("format");var k="";for(var h=f.length-1;h>=0;h--){if(f[h].checked){k=f[h].value;break}}var g=ChannelCommon.checkTalk(m);if(g){b.fire(c.showDialog,{type:"error",message:g});return true}b.fire(c.talk,{text:m,format:k});break;case"focus":d.g("editor").focus();break}});d.on("editor","keydown",function(f){switch(f.which||f.keyCode||f.charCode){case 13:if(!(d.g("ctrlEnter").checked^f.ctrlKey)){d.event.stop(f);AceEvent.fire(e,"send")}break}})}}});AceCore.addModule("DialogBox",function(c){var e=c.getConfig("Events");var g=c.getLib();var f=0;function b(h){h._handler=f++;dialogTree.appendChild(h);h.onshow&&h.onshow(h)}function d(h){dialogTree.removeNode(h);h.onclose&&h.onclose(h)}return{init:function(){dialogTree=AceTree.create({fieldIdentifier:"_handler",parent:g.g("dialogTemplate").parentNode,oninit:function(h){h.eventHandler=AceEvent.on(h.parent,function(l,i,k){var j=h.node4target(i);j&&h.oncommand(l,j,k)})},onreader:function(h){return AceTemplate.format("dialogTemplate",h.data)},oncommand:function(k,i,j){var h=i.data.oncommand&&i.data.oncommand(k,i.data);if(!h){d(i.data)}}});c.on(e.showDialog,b)}}});AceCore.addModule("LetterBox",function(l){var n=l.getConfig("Events");var i=l.getLib();var c={};var g=l.getExtension("ChatApi")||l.getExtension("ZhouziApi");var h;function o(q){i.each(q,function(r){switch(r.type){case"passport":c=r.info;break;case"letterAll":h.loadChilds(r.messages);h.each(function(s){s.setStatus("old",s.data.time<r.lastView)});f();b();break;case"letterAdd":h.appendChilds(r.messages);b();f();break}})}function b(){var q=h.parent.parentNode;q.scrollTop=q.scrollHeight}var j=0;function f(){j=0;h.each(function(q){if(!q.getStatus("old")){j++}});i.g("newLetterNumber").innerHTML=j?"(<b>"+j+"</b>)":""}function m(r){r=new Date(r);var s=i.date.format(r,"HH:mm:ss");var q=i.date.format(r,"yyyy:MM:dd");return i.date.format(new Date,"yyyy:MM:dd")==q?s:[q,s].join(" ")}function d(q){return i.encodeHTML(q).replace(/\n/g,"<br/>")}function e(q){l.fire(n.showDialog,{type:"letter",nick:q.nick,to:q.to,oncommand:function(u,t){if(u!="ok"){return}var s=i.g("inputLetter").value;var r=ChannelCommon.checkLetter(s);if(r){l.fire(n.showDialog,{type:"error",message:r});return true}g.command({command:"letter",to:t.to,text:s})},onshow:function(s){var r=i.g("inputLetter");r.setSelectionRange(0,r.value.length);r.focus()}})}function k(){i.removeClass("letterBox","hidden");if(!j){return}g.command({command:"viewLetter"})}return{init:function(){h=AceTree.create({parent:i.g("letterListTemplate").parentNode,oninit:function(q){q.eventHandler=AceEvent.on(q.parent,function(u,r,t){var s=q.node4target(r);s&&q.oncommand(u,s,t)})},onreader:function(q){return AceTemplate.format("letterListTemplate",q.data,{node:q,formatTime:m,mutiline:d})},oncommand:function(s,q,r){switch(s){case"reply":l.fire(n.letterDialog,{nick:q.data.nick,to:q.data.from});break}},statusClasses:/^(focus|hover|select|expand|old|self)$/,oncreated:function(q){q.setStatus("self",q.data.from==c.id,true)}});l.on(n.letterDialog,e);l.on(n.pickSuccess,o);l.on(n.viewLetter,k);AceEvent.on("letterBox",function(q){switch(q){case"ok":case"cancel":i.addClass("letterBox","hidden");if(!j){return}h.each(function(r){r.setStatus("old",true)});f();break}})}}});AceCore.addModule("VoteBox",function(c){var d=c.getConfig("Events");var f=c.getLib();var b;var g={};function e(h){f.each(h,function(i){switch(i.type){case"passport":g=i.info;break;case"voteAll":b.loadChilds(i.votes);break;case"voteUpdate":f.each(i.votes,function(k){var j=b.updateData(k)});break}})}return{init:function(){b=AceTree.create({parent:f.g("voteListTemplate").parentNode,oninit:function(h){h.eventHandler=AceEvent.on(h.parent,function(l,k,j){var i=h.node4target(k);i&&h.oncommand(l,i,j)})},onreader:function(h){return AceTemplate.format("voteListTemplate",h.data,{node:h})},oncommand:function(j,h,i){switch(j){case"vote":if(h.data.voted){return}h.tree.each(function(k){k.data.voted=true});h.tree.refresh();c.fire(d.vote,h.data.id);break}},statusClasses:/^(focus|hover|select|expand|self)$/});c.on(d.pickSuccess,e)}}});